// Test: Unsafe trait error - missing unsafe impl
// Expected: build-error
// Error: implementing unsafe trait requires 'unsafe impl'

unsafe trait RawHandle {
    fn as_raw(self: ref Self) -> i64
}

struct FileDescriptor {
    fd: i64,
}

// ERROR: implementing unsafe trait without unsafe impl
impl FileDescriptor: RawHandle {
    fn as_raw(self: ref Self) -> i64 {
        return self.fd
    }
}

fn main() -> i32 {
    return 0
}
