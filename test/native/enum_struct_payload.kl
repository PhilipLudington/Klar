// Test enum with struct payload construction (Bug 12 fix)
// Verifies that enum variants with named struct fields are
// correctly type-checked during construction.
// Tests construction only; destructuring struct payloads in match
// is a known codegen limitation.

enum Token {
    Number(i32),
    Pair { first: i32, second: i32 },
    Empty,
}

fn is_number(t: Token) -> bool {
    match t {
        Token::Number(_) => { return true }
        _ => { return false }
    }
}

fn main() -> i32 {
    // Test 1: Construct enum with struct payload (positional args mapped to fields)
    let t1: Token = Token::Pair(10, 32)

    // Test 2: Construct enum with tuple payload
    let t2: Token = Token::Number(42)
    if not is_number(t2) {
        return 1
    }

    // Test 3: Unit variant
    let t3: Token = Token::Empty
    if is_number(t3) {
        return 2
    }

    return 0
}
